diff --git a/lib/dwl/Makefile b/lib/dwl/Makefile
--- a/lib/dwl/Makefile
+++ b/lib/dwl/Makefile
@@ -38,14 +38,20 @@ dwl: dwl.o util.o dbus.o wallpaper.o $(TRAYOBJS)

 # Build with extras: Wren scripting + GLSL shader wallpapers
 extras: DWLCPPFLAGS += -DSCRIPTING -DEXTRAS $(WREN_INC) $(GLES_CFLAGS)
-extras: dwl.o util.o dbus.o wallpaper.o scripting.o $(TRAYOBJS)
-	$(CC) $(WREN_SRC) dwl.o util.o dbus.o wallpaper.o scripting.o $(TRAYOBJS) $(DWLCFLAGS) $(WREN_INC) $(GLES_CFLAGS) $(LDFLAGS) $(LDLIBS) $(GLES_LIBS) -o dwl
+extras: dwl.o util.o dbus.o wallpaper.o scripting.o attached_surface.o wlr-attached-surface-protocol.o $(TRAYOBJS)
+	$(CC) $(WREN_SRC) dwl.o util.o dbus.o wallpaper.o scripting.o attached_surface.o wlr-attached-surface-protocol.o $(TRAYOBJS) $(DWLCFLAGS) $(WREN_INC) $(GLES_CFLAGS) $(LDFLAGS) $(LDLIBS) $(GLES_LIBS) -o dwl

 scripting.o: scripting.c scripting.h
 	$(CC) $(CPPFLAGS) $(DWLCFLAGS) -DSCRIPTING -DEXTRAS $(WREN_INC) $(GLES_CFLAGS) -o $@ -c $<
+attached_surface.o: attached_surface.c attached_surface.h wlr-attached-surface-unstable-v1-protocol.h
+	$(CC) $(CPPFLAGS) $(DWLCFLAGS) -DSCRIPTING -DEXTRAS $(WREN_INC) $(GLES_CFLAGS) -o $@ -c $<
+wlr-attached-surface-protocol.o: wlr-attached-surface-protocol.c
+	$(CC) $(CPPFLAGS) $(DWLCFLAGS) -o $@ -c $<
 dwl.o: dwl.c client.h dbus.h config.h config.mk cursor-shape-v1-protocol.h \
 	pointer-constraints-unstable-v1-protocol.h wlr-layer-shell-unstable-v1-protocol.h \
-	wlr-output-power-management-unstable-v1-protocol.h xdg-shell-protocol.h \
+	wlr-output-power-management-unstable-v1-protocol.h \
+	wlr-attached-surface-unstable-v1-protocol.h xdg-shell-protocol.h \
+	attached_surface.h \
 	wallpaper.h $(TRAYDEPS)
 util.o: util.c util.h
 dbus.o: dbus.c dbus.h
@@ -75,6 +81,12 @@ wlr-layer-shell-unstable-v1-protocol.h:
 wlr-output-power-management-unstable-v1-protocol.h:
 	$(WAYLAND_SCANNER) server-header \
 		protocols/wlr-output-power-management-unstable-v1.xml $@
+wlr-attached-surface-unstable-v1-protocol.h:
+	$(WAYLAND_SCANNER) server-header \
+		protocols/wlr-attached-surface-unstable-v1.xml $@
+wlr-attached-surface-protocol.c:
+	$(WAYLAND_SCANNER) private-code \
+		protocols/wlr-attached-surface-unstable-v1.xml $@
 xdg-shell-protocol.h:
 	$(WAYLAND_SCANNER) server-header \
 		$(WAYLAND_PROTOCOLS)/stable/xdg-shell/xdg-shell.xml $@
diff --git a/lib/dwl/dwl.c b/lib/dwl/dwl.c
--- a/lib/dwl/dwl.c
+++ b/lib/dwl/dwl.c
@@ -77,6 +77,7 @@
 #include "systray/watcher.h"
 #include "wallpaper.h"
 #include "scripting.h"
+#include "attached_surface.h"

 /* macros */
 #define MAX(A, B)               ((A) > (B) ? (A) : (B))
@@ -610,6 +611,7 @@ arrange(Monitor *m)
 		m->lt[m->sellt]->arrange(m);
 	motionnotify(0, NULL, 0, 0, 0, 0);
 	checkidleinhibitor(NULL);
+	attached_surface_update_positions();
 }

 void
@@ -903,6 +905,7 @@ cleanup(void)
 #ifdef XWAYLAND
 	wlr_xwayland_destroy(xwayland);
 #endif
+	attached_surface_finish();
 	wl_display_destroy_clients(dpy);
 	if (googledrive_watch)
 		g_object_unref(googledrive_watch);
@@ -1109,6 +1112,7 @@ commitnotify(struct wl_listener *listener, void *data)
 	}

 	resize(c, c->geom, (c->isfloating && !c->isfullscreen));
+	attached_surface_update_positions();

 	/* mark a pending resize as completed */
 	if (c->resize && c->resize <= c->surface.xdg->current.configure_serial)
@@ -2954,6 +2958,9 @@ setup(void)
 	layer_shell = wlr_layer_shell_v1_create(dpy, 3);
 	wl_signal_add(&layer_shell->events.new_surface, &new_layer_surface);

+	/* Set up attached surface protocol */
+	attached_surface_init(dpy, output_layout);
+
 	idle_notifier = wlr_idle_notifier_v1_create(dpy);

 	idle_inhibit_mgr = wlr_idle_inhibit_v1_create(dpy);
